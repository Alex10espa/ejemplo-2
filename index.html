<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tienda de Cartuchos Reciclados</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <style>
    /* Reset de márgenes y padding */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Diseño global */
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f4f4f4;
      color: #333;
    }

    header {
      background-color: #003366;
      color: white;
      padding: 20px;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    header h1 {
      font-size: 2.5em;
      margin-bottom: 0.5em;
    }

    header p {
      font-size: 1.2em;
    }

    nav {
      background-color: #fff;
      padding: 10px 0;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    nav a {
      color: #003366;
      margin: 0 20px;
      font-size: 1.1em;
      text-decoration: none;
      text-transform: uppercase;
    }

    nav a:hover {
      color: #ff6600;
    }

    .products {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      padding: 40px;
    }

    .product {
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .product:hover {
      transform: translateY(-10px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
    }

    .product img {
      width: 100%;
      border-radius: 8px;
      margin-bottom: 15px;
    }

    .product h3 {
      font-size: 1.6em;
      margin-bottom: 10px;
      color: #003366;
    }

    .product p {
      font-size: 1.1em;
      color: #555;
    }

    .product button {
      background-color: #ff6600;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 1.2em;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: background-color 0.3s ease;
    }

    .product button:hover {
      background-color: #e65c00;
    }

    #cart {
      background-color: #fff;
      padding: 20px;
      margin: 20px auto;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }

    #cart h2 {
      font-size: 1.8em;
      color: #003366;
    }

    #stripe-button-container {
      margin-top: 20px;
      text-align: center;
    }

    #checkout-button {
      background-color: #003366;
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 1.4em;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    #checkout-button:hover {
      background-color: #ff6600;
    }

    /* Carrito de compras */
    #cart ul {
      list-style-type: none;
      margin-bottom: 10px;
    }

    #cart-items li {
      font-size: 1.2em;
      padding: 5px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .remove-btn {
      background-color: #ff0000;
      color: white;
      padding: 5px 10px;
      border: none;
      font-size: 1em;
      border-radius: 5px;
      cursor: pointer;
    }

    .remove-btn:hover {
      background-color: #cc0000;
    }

    .about-us {
      padding: 40px;
      background-color: #fff;
      margin-top: 40px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }

    .about-us h2 {
      font-size: 2em;
      color: #003366;
      margin-bottom: 20px;
    }

    .about-us p {
      font-size: 1.2em;
      color: #555;
    }
  </style>
</head>
<body>

  <header>
    <h1>Tienda de Cartuchos Reciclados</h1>
    <p>¡Cuida el planeta y ahorra dinero!</p>
  </header>

  <nav>
    <a href="#">Inicio</a>
    <a href="#">Productos</a>
    <a href="#about-us">Nosotros</a>
    <a href="#">Contacto</a>
  </nav>

  <section class="products">
    <div class="product">
      <img src="https://via.placeholder.com/300x200" alt="Cartucho HP 305XL">
      <h3>Cartucho HP 305XL Negro</h3>
      <p>Compatibilidad: HP DeskJet 2710, 2720, 2721</p>
      <p>Precio: 9.99 €</p>
      <button onclick="addToCart('HP 305XL Negro', 9.99)">Añadir al carrito</button>
    </div>
    <div class="product">
      <img src="https://via.placeholder.com/300x200" alt="Cartucho Canon PG-545">
      <h3>Cartucho Canon PG-545</h3>
      <p>Compatibilidad: Canon MG2550, MG2450</p>
      <p>Precio: 8.50 €</p>
      <button onclick="addToCart('Canon PG-545', 8.50)">Añadir al carrito</button>
    </div>
  </section>

  <section id="cart">
    <h2>Carrito</h2>
    <ul id="cart-items"></ul>
    <p>Total: <span id="total">0.00 €</span></p>
  </section>

  <!-- Stripe Checkout Button Section -->
  <div id="stripe-button-container">
    <h3>Finaliza tu pedido</h3>
    <button id="checkout-button">Pagar con tarjeta</button>
  </div>

  <!-- Sección sobre nosotros -->
  <section id="about-us" class="about-us">
    <h2>Sobre nosotros</h2>
    <p>Carttoner es una tienda especializada en la venta de cartuchos de tinta reciclados de alta calidad. Nos dedicamos a ofrecer productos ecológicos y económicos que ayudan a reducir el impacto ambiental de los cartuchos desechables. Nuestro objetivo es hacer que nuestros clientes ahorren dinero mientras cuidan el planeta. Con más de 10 años de experiencia en el sector, garantizamos un excelente servicio y productos a precios competitivos.</p>
  </section>

  <script src="https://js.stripe.com/v3/"></script>
  <script>
    let cart = [];

    function addToCart(productName, productPrice) {
      cart.push({ name: productName, price: productPrice });
      renderCart();
    }

    function renderCart() {
      const cartItemsContainer = document.getElementById('cart-items');
      cartItemsContainer.innerHTML = '';
      cart.forEach((item, index) => {
        const li = document.createElement('li');
        li.innerHTML = `${item.name} - ${item.price.toFixed(2)} € <button class="remove-btn" onclick="removeFromCart(${index})">Eliminar</button>`;
        cartItemsContainer.appendChild(li);
      });
      updateTotal();
    }

    function updateTotal() {
      const total = cart.reduce((sum, item) => sum + item.price, 0);
      document.getElementById('total').textContent = total.toFixed(2) + ' €';
    }

    function removeFromCart(index) {
      cart.splice(index, 1);
      renderCart();
    }

    // Configurar el botón de Stripe Checkout
    const stripe = Stripe('YOUR_PUBLIC_STRIPE_KEY'); // Reemplaza con tu clave pública de Stripe

    document.getElementById('checkout-button').addEventListener('click', () => {
      const totalAmount = calculateTotal(); // Total de la compra
      fetch('/create-checkout-session', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ total: totalAmount }),
      })
      .then((response) => response.json())
      .then((sessionId) => {
        // Redirigir al usuario a Stripe Checkout
        return stripe.redirectToCheckout({ sessionId });
      })
      .then((result) => {
        if (result.error) {
          alert(result.error.message);
        }
      })
      .catch((error) => {
        console.error('Error:', error);
        alert('Hubo un error al intentar procesar el pago.');
      });
    });

    // Función para calcular el total
    function calculateTotal() {
      let total = 0;
      cart.forEach(item => {
        total += item.price;
      });
      return total * 100; // Convertir a centavos, ya que Stripe maneja los montos en centavos
    }
  </script>

</body>
</html>
